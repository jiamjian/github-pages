JFinal是一个国产的web开发框架。
听说JFinal的大名已经很久，考研过后终于有时间来接触一下这个传说中很简单的框架。

在此之前深受Spring的荼毒，被各种神奇的配置文件和注解虐得死去活来。JFinal精简的开发方式确实让人耳目一新。

完成几个demo之后，决定下载源码来看看。

下载完后的第一感觉就是代码很少，很简单。同时对这种简单的代码却真正解决了实际问题的作者深感钦佩。

许是为了减少依赖，其实源码中还有很多是轮子的源码诸如json，log等。诸如此类减去之后整个源码瞬间又少了不少。

概要了解一下具体的执行流程。

一、JFinalFilter类

这个过滤器可以说是执行的入口。
初始化init()方法说到底就是根据在web.xml中指定的配置类Config构造了一个JFinal对象。
这个JFinal对象才是本体，包含了JFinal重要的Constants,ActionMapping,Handler等对象。

过滤器需要用到的就是Handler对象。
通过过滤器获取到url路径，将路径交给Handler对象，并分配到Action中。

二、Action类，ActionMapping类
在Handler中，实际上是在实现类ActionHandler中，一个重要的类就是Action
JFinal没有使用注解或者配置文件的方式实现url映射，而是在初始化的配置类中通过代码实现。将一个Controller类映射到一个url上。
而类中的方法就提取出来作为一个Action。一个Action包括了处理此url的类，方法，请求方式，拦截器等相关的信息。
ActionMapping就是保存Action于url的映射关系的类。

三、Handler类
此处主要用到了ActionHandler这个实现类。
具体的工作很简单，就是调用ActionMapping类，获取到url对应的Action，并调用之。

四、Controller类
Controller是在开发过程中需要继承的重要抽象类。
在Controller类中主要封装了大量的对request,response的操作。包括了常见的参数、cookie、文件操作等。

五、Render类
Render是在Controller类中的重要对象。
每一个Controller的方法处理之后，都需要通过Render将结果返回给客户端。
Render封装了各种不同的返回方式，包括常用的json，jsp等。还支持FreeMaker等。

对于一次web请求来说，主要的流程就只有这些。也可见JFinal的结构确实非常精简。

JFinal的源码比较适合于刚开始阅读源码的朋友学习。不会有太多的阻碍，整体来说比较扁平。
